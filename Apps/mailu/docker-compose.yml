# This file is auto-generated by the Mailu configuration wizard.
# Please read the documentation before attempting any change.
# Generated for compose flavor

version: '2.2'

services:

  # External dependencies
  redis:
    image: redis:alpine
    restart: always
    volumes:
      - "/DATA/AppData/$AppID/mailu/redis:/data"
    depends_on:
      - resolver
    dns:
      - 192.168.203.254

  # Core services
  front:
    image: ${DOCKER_ORG:-ghcr.io/mailu}/${DOCKER_PREFIX:-}nginx:${MAILU_VERSION:-2.0}
    restart: always
    environment:
      - SECRET_KEY=JQETIX0RO8GFU1XO
      - SUBNET=192.168.203.0/24
      - DOMAIN=stackjac.com
      - HOSTNAMES=mail.stackjac.com
      - POSTMASTER=admin
      - TLS_FLAVOR=notls
      - AUTH_RATELIMIT_IP=5/hour
      - AUTH_RATELIMIT_USER=50/day
      - DISABLE_STATISTICS=False
      - ADMIN=true
      - WEBMAIL=snappymail
      - WEB_WEBMAIL=/webmail
      - API=false
      - WEBDAV=none
      - ANTIVIRUS=none
      - SCAN_MACROS=true
      - MESSAGE_SIZE_LIMIT=50000000
      - MESSAGE_RATELIMIT=200/day
      - FETCHMAIL_ENABLED=False
      - FETCHMAIL_DELAY=600
      - RECIPIENT_DELIMITER=+
      - DMARC_RUA=admin
      - DMARC_RUF=admin
      - WELCOME=false
      - WELCOME_SUBJECT=Welcome to your new email account
      - WELCOME_BODY=Welcome to your new email account, if you can read this, then it is configured properly!
      - WEB_ADMIN=/admin
      - SITENAME=Mailu
      - WEBSITE=https://stackjac.com
      - COMPOSE_PROJECT_NAME=mailu
      - CREDENTIAL_ROUNDS=12
      - LOG_LEVEL=WARNING
      - TZ=Etc/UTC
      - DEFAULT_SPAM_THRESHOLD=80
      - INITIAL_ADMIN_ACCOUNT=me
      - INITIAL_ADMIN_DOMAIN=example.net
      - INITIAL_ADMIN_PW=password
      - INITIAL_ADMIN_MODE=ifmissing
    logging:
      driver: journald
      options:
        tag: mailu-front
    ports:
      - "65.108.210.234:8044:80"
      - "65.108.210.234:8008:8008"
      - "65.108.210.234:4434:443"
      - "65.108.210.234:25:25"
      - "65.108.210.234:465:465"
      - "65.108.210.234:587:587"
      - "65.108.210.234:110:110"
      - "65.108.210.234:995:995"
      - "65.108.210.234:143:143"
      - "65.108.210.234:993:993"
    networks:
      - default
    volumes:
      - "/DATA/AppData/$AppID/mailu/certs:/certs"
      - "/DATA/AppData/$AppID/mailu/overrides/nginx:/overrides:ro"
    depends_on:
      - resolver
    dns:
      - 192.168.203.254

  resolver:
    image: ${DOCKER_ORG:-ghcr.io/mailu}/${DOCKER_PREFIX:-}unbound:${MAILU_VERSION:-2.0}
    environment:
      - SECRET_KEY=JQETIX0RO8GFU1XO
      - SUBNET=192.168.203.0/24
      - DOMAIN=stackjac.com
      - HOSTNAMES=mail.stackjac.com
      - POSTMASTER=admin
      - TLS_FLAVOR=notls
      - AUTH_RATELIMIT_IP=5/hour
      - AUTH_RATELIMIT_USER=50/day
      - DISABLE_STATISTICS=False
      - ADMIN=true
      - WEBMAIL=snappymail
      - WEB_WEBMAIL=/webmail
      - API=false
      - WEBDAV=none
      - ANTIVIRUS=none
      - SCAN_MACROS=true
      - MESSAGE_SIZE_LIMIT=50000000
      - MESSAGE_RATELIMIT=200/day
      - FETCHMAIL_ENABLED=False
      - FETCHMAIL_DELAY=600
      - RECIPIENT_DELIMITER=+
      - DMARC_RUA=admin
      - DMARC_RUF=admin
      - WELCOME=false
      - WELCOME_SUBJECT=Welcome to your new email account
      - WELCOME_BODY=Welcome to your new email account, if you can read this, then it is configured properly!
      - WEB_ADMIN=/admin
      - SITENAME=Mailu
      - WEBSITE=https://stackjac.com
      - COMPOSE_PROJECT_NAME=mailu
      - CREDENTIAL_ROUNDS=12
      - LOG_LEVEL=WARNING
      - TZ=Etc/UTC
      - DEFAULT_SPAM_THRESHOLD=80
      - INITIAL_ADMIN_ACCOUNT=me
      - INITIAL_ADMIN_DOMAIN=example.net
      - INITIAL_ADMIN_PW=password
      - INITIAL_ADMIN_MODE=ifmissing
    restart: always
    networks:
      default:
        ipv4_address: 192.168.203.254

  admin:
    image: ${DOCKER_ORG:-ghcr.io/mailu}/${DOCKER_PREFIX:-}admin:${MAILU_VERSION:-2.0}
    restart: always
    environment:
      - SECRET_KEY=JQETIX0RO8GFU1XO
      - SUBNET=192.168.203.0/24
      - DOMAIN=stackjac.com
      - HOSTNAMES=mail.stackjac.com
      - POSTMASTER=admin
      - TLS_FLAVOR=notls
      - AUTH_RATELIMIT_IP=5/hour
      - AUTH_RATELIMIT_USER=50/day
      - DISABLE_STATISTICS=False
      - ADMIN=true
      - WEBMAIL=snappymail
      - WEB_WEBMAIL=/webmail
      - API=false
      - WEBDAV=none
      - ANTIVIRUS=none
      - SCAN_MACROS=true
      - MESSAGE_SIZE_LIMIT=50000000
      - MESSAGE_RATELIMIT=200/day
      - FETCHMAIL_ENABLED=False
      - FETCHMAIL_DELAY=600
      - RECIPIENT_DELIMITER=+
      - DMARC_RUA=admin
      - DMARC_RUF=admin
      - WELCOME=false
      - WELCOME_SUBJECT=Welcome to your new email account
      - WELCOME_BODY=Welcome to your new email account, if you can read this, then it is configured properly!
      - WEB_ADMIN=/admin
      - SITENAME=Mailu
      - WEBSITE=https://stackjac.com
      - COMPOSE_PROJECT_NAME=mailu
      - CREDENTIAL_ROUNDS=12
      - LOG_LEVEL=WARNING
      - TZ=Etc/UTC
      - DEFAULT_SPAM_THRESHOLD=80
      - INITIAL_ADMIN_ACCOUNT=me
      - INITIAL_ADMIN_DOMAIN=example.net
      - INITIAL_ADMIN_PW=password
      - INITIAL_ADMIN_MODE=ifmissing
    logging:
      driver: journald
      options:
        tag: mailu-admin
    volumes:
      - "/DATA/AppData/$AppID/mailu/data:/data"
      - "/DATA/AppData/$AppID/mailu/dkim:/dkim"
    depends_on:
      - redis
      - resolver
    dns:
      - 192.168.203.254

  imap:
    image: ${DOCKER_ORG:-ghcr.io/mailu}/${DOCKER_PREFIX:-}dovecot:${MAILU_VERSION:-2.0}
    restart: always
    environment:
      - SECRET_KEY=JQETIX0RO8GFU1XO
      - SUBNET=192.168.203.0/24
      - DOMAIN=stackjac.com
      - HOSTNAMES=mail.stackjac.com
      - POSTMASTER=admin
      - TLS_FLAVOR=notls
      - AUTH_RATELIMIT_IP=5/hour
      - AUTH_RATELIMIT_USER=50/day
      - DISABLE_STATISTICS=False
      - ADMIN=true
      - WEBMAIL=snappymail
      - WEB_WEBMAIL=/webmail
      - API=false
      - WEBDAV=none
      - ANTIVIRUS=none
      - SCAN_MACROS=true
      - MESSAGE_SIZE_LIMIT=50000000
      - MESSAGE_RATELIMIT=200/day
      - FETCHMAIL_ENABLED=False
      - FETCHMAIL_DELAY=600
      - RECIPIENT_DELIMITER=+
      - DMARC_RUA=admin
      - DMARC_RUF=admin
      - WELCOME=false
      - WELCOME_SUBJECT=Welcome to your new email account
      - WELCOME_BODY=Welcome to your new email account, if you can read this, then it is configured properly!
      - WEB_ADMIN=/admin
      - SITENAME=Mailu
      - WEBSITE=https://stackjac.com
      - COMPOSE_PROJECT_NAME=mailu
      - CREDENTIAL_ROUNDS=12
      - LOG_LEVEL=WARNING
      - TZ=Etc/UTC
      - DEFAULT_SPAM_THRESHOLD=80
      - INITIAL_ADMIN_ACCOUNT=me
      - INITIAL_ADMIN_DOMAIN=example.net
      - INITIAL_ADMIN_PW=password
      - INITIAL_ADMIN_MODE=ifmissing
    logging:
      driver: journald
      options:
        tag: mailu-imap
    volumes:
      - "/DATA/AppData/$AppID/mailu/mail:/mail"
      - "/DATA/AppData/$AppID/mailu/overrides/dovecot:/overrides:ro"
    depends_on:
      - front
      - resolver
    dns:
      - 192.168.203.254

  smtp:
    image: ${DOCKER_ORG:-ghcr.io/mailu}/${DOCKER_PREFIX:-}postfix:${MAILU_VERSION:-2.0}
    restart: always
    environment:
      - SECRET_KEY=JQETIX0RO8GFU1XO
      - SUBNET=192.168.203.0/24
      - DOMAIN=stackjac.com
      - HOSTNAMES=mail.stackjac.com
      - POSTMASTER=admin
      - TLS_FLAVOR=notls
      - AUTH_RATELIMIT_IP=5/hour
      - AUTH_RATELIMIT_USER=50/day
      - DISABLE_STATISTICS=False
      - ADMIN=true
      - WEBMAIL=snappymail
      - WEB_WEBMAIL=/webmail
      - API=false
      - WEBDAV=none
      - ANTIVIRUS=none
      - SCAN_MACROS=true
      - MESSAGE_SIZE_LIMIT=50000000
      - MESSAGE_RATELIMIT=200/day
      - FETCHMAIL_ENABLED=False
      - FETCHMAIL_DELAY=600
      - RECIPIENT_DELIMITER=+
      - DMARC_RUA=admin
      - DMARC_RUF=admin
      - WELCOME=false
      - WELCOME_SUBJECT=Welcome to your new email account
      - WELCOME_BODY=Welcome to your new email account, if you can read this, then it is configured properly!
      - WEB_ADMIN=/admin
      - SITENAME=Mailu
      - WEBSITE=https://stackjac.com
      - COMPOSE_PROJECT_NAME=mailu
      - CREDENTIAL_ROUNDS=12
      - LOG_LEVEL=WARNING
      - TZ=Etc/UTC
      - DEFAULT_SPAM_THRESHOLD=80
      - INITIAL_ADMIN_ACCOUNT=me
      - INITIAL_ADMIN_DOMAIN=example.net
      - INITIAL_ADMIN_PW=password
      - INITIAL_ADMIN_MODE=ifmissing
    logging:
      driver: journald
      options:
        tag: mailu-smtp
    volumes:
      - "/DATA/AppData/$AppID/mailu/mailqueue:/queue"
      - "/DATA/AppData/$AppID/mailu/overrides/postfix:/overrides:ro"
    depends_on:
      - front
      - resolver
    dns:
      - 192.168.203.254

  oletools:
    image: ${DOCKER_ORG:-ghcr.io/mailu}/${DOCKER_PREFIX:-}oletools:${MAILU_VERSION:-2.0}
    hostname: oletools
    restart: always
    networks:
      - noinet
    depends_on:
      - resolver
    dns:
      - 192.168.203.254

  antispam:
    image: ${DOCKER_ORG:-ghcr.io/mailu}/${DOCKER_PREFIX:-}rspamd:${MAILU_VERSION:-2.0}
    hostname: antispam
    restart: always
    environment:
      - SECRET_KEY=JQETIX0RO8GFU1XO
      - SUBNET=192.168.203.0/24
      - DOMAIN=stackjac.com
      - HOSTNAMES=mail.stackjac.com
      - POSTMASTER=admin
      - TLS_FLAVOR=notls
      - AUTH_RATELIMIT_IP=5/hour
      - AUTH_RATELIMIT_USER=50/day
      - DISABLE_STATISTICS=False
      - ADMIN=true
      - WEBMAIL=snappymail
      - WEB_WEBMAIL=/webmail
      - API=false
      - WEBDAV=none
      - ANTIVIRUS=none
      - SCAN_MACROS=true
      - MESSAGE_SIZE_LIMIT=50000000
      - MESSAGE_RATELIMIT=200/day
      - FETCHMAIL_ENABLED=False
      - FETCHMAIL_DELAY=600
      - RECIPIENT_DELIMITER=+
      - DMARC_RUA=admin
      - DMARC_RUF=admin
      - WELCOME=false
      - WELCOME_SUBJECT=Welcome to your new email account
      - WELCOME_BODY=Welcome to your new email account, if you can read this, then it is configured properly!
      - WEB_ADMIN=/admin
      - SITENAME=Mailu
      - WEBSITE=https://stackjac.com
      - COMPOSE_PROJECT_NAME=mailu
      - CREDENTIAL_ROUNDS=12
      - LOG_LEVEL=WARNING
      - TZ=Etc/UTC
      - DEFAULT_SPAM_THRESHOLD=80
      - INITIAL_ADMIN_ACCOUNT=me
      - INITIAL_ADMIN_DOMAIN=example.net
      - INITIAL_ADMIN_PW=password
      - INITIAL_ADMIN_MODE=ifmissing
    logging:
      driver: journald
      options:
        tag: mailu-antispam
    networks:
      - default
      - noinet
    volumes:
      - "/DATA/AppData/$AppID/mailu/filter:/var/lib/rspamd"
      - "/DATA/AppData/$AppID/mailu/overrides/rspamd:/overrides:ro"
    depends_on:
      - front
      - redis
      - oletools
      - resolver
    dns:
      - 192.168.203.254

  # Optional services



  # Webmail

networks:
  default:
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: 192.168.203.0/24
  noinet:
    driver: bridge
    internal: true

x-casaos:
  architectures:
    - amd64
    - arm
    - arm64
  main: mailu
  author: Mypancho.com
  category: Mail
  description:
    en_us: Mailu, available as Docker images, offers a user-friendly, open-source mail server solution. It's cost-free and open to input and collaboration. The project's goal is to deliver a hassle-free, comprehensive mail server that's simple to install and manage, without including proprietary software or extraneous features typically associated with groupware solutions.
  developer: Mailu Team
  icon: https://cdn.jsdelivr.net/gh/uche40/Dev-Pancho-Cloud-App-Store@main/Apps/mailu/icon.png
  screenshot_link:
    - https://cdn.jsdelivr.net/gh/uche40/Dev-Pancho-Cloud-App-Store@main/Apps/mailu/screenshot-1.png
    - https://cdn.jsdelivr.net/gh/uche40/Dev-Pancho-Cloud-App-Store@main/Apps/mailu/screenshot-2.png
    - https://cdn.jsdelivr.net/gh/uche40/Dev-Pancho-Cloud-App-Store@main/Apps/mailu/screenshot-3.png
  thumbnail: https://cdn.jsdelivr.net/gh/uche40/Dev-Pancho-Cloud-App-Store@main/Apps/mailu/thumbnail.png
  tagline:
    en_us: Mailu is a simple yet full-featured mail server. 
  hostname: ""
  scheme: http
  index: /
  port_map: ""